# Cargo configuration for anubis-notary
#
# ML-DSA-87 (FIPS 204) key generation and signing use large stack temporaries
# for polynomial vectors, NTT workspaces, and SHAKE buffers. The default Rust
# test thread stack is too small for these operations.

[env]
# 32 MiB per test thread - sufficient for ML-DSA-87 operations
RUST_MIN_STACK = "33554432"

# Single test thread reduces peak memory and avoids stack exhaustion
# from concurrent ML-DSA operations
RUST_TEST_THREADS = "1"
